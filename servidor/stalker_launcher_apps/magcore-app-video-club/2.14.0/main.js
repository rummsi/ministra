!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=23)}([function(e,t,i){"use strict";var a=i(12);a.back=a.backspace,a.channelNext=a.tab,a.channelPrev=a.tab+"s",a.ok=a.enter,a.exit=a.escape,a.volumeUp=107,a.volumeDown=109,a.f1="112c",a.f2="113c",a.f3="114c",a.f4="115c",a.refresh="116c",a.frame="117c",a.phone="119c",a.set="120c",a.tv="121c",a.menu="122c",a.app="123c",a.rewind="66a",a.forward="70a",a.audio="71a",a.standby="74a",a.keyboard="76a",a.usbMounted="80a",a.usbUnmounted="81a",a.playPause="82a",a.play=-1,a.pause=-1,a.stop="83a",a.power="85a",a.record="87a",a.info="89a",a.mute="192a",a.digit0=48,a.digit1=49,a.digit2=50,a.digit3=51,a.digit4=52,a.digit5=53,a.digit6=54,a.digit7=55,a.digit8=56,a.digit9=57,e.exports=a},function(e,t,i){"use strict";var a=i(2),n=i(5),s=0;function o(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,n.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+s++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){i.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){i.focus(),i.events["click"]&&i.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.defaultEvents=null,o.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},o.prototype.remove=function(){this.parent&&(a.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},o.prototype.focus=function(e){var t=a.activePage,i=t.activeComponent;return!(!this.focusable||this===i)&&(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),this.name,this.id,this.name,this.id,i.events["focus"]&&i.emit("focus",e),!0)},o.prototype.blur=function(){var e=a.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},o.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},o.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=o},function(e,t,i){"use strict";var a=i(5),n=i(25).parse,s=new a;s.query=n(document.location.search.substring(1)),s.config=i(26),s.activePage=null,s.route=function(e,t){var i,a=s.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(i=s.activePage)&&i.active&&(i.$node.classList.remove("active"),i.active=!1,s.activePage=null,i.name,i.id,i.name,i.id,i.events["hide"]&&i.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,s.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:a,to:e}),!0)},e.exports=s},function(e,t,i){"use strict";e.exports=i(1)},function(e,t,i){"use strict";var a=i(24);e.exports=a},function(e,t,i){"use strict";function a(){this.events={}}a.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function a(){i.removeListener(e,a),t.apply(i,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},a.prototype.constructor=a,e.exports=a},function(e,t,i){"use strict";var a={tag:function(e,t,i){var a,n,s=null;if(e){if(s=document.createElement(e),t&&"object"==typeof t)for(n in t)s[n]=t[n];for(a=2;a<arguments.length;a++)arguments[a]&&s.appendChild("object"==typeof arguments[a]?arguments[a]:document.createTextNode(arguments[a]))}return s},fragment:function(e){var t,i=document.createDocumentFragment();for(t=0;t<arguments.length;t++)(e=arguments[t])&&i.appendChild("object"==typeof e?e:document.createTextNode(e));return i},add:function(e,t){var i;if(e instanceof Node){for(i=1;i<arguments.length;i++)arguments[i]&&e.appendChild("object"==typeof arguments[i]?arguments[i]:document.createTextNode(arguments[i]));return e}return null},remove:function(e){var t,i=0;for(t=0;t<arguments.length;t++)arguments[t]&&arguments[t].parentNode&&arguments[t].parentNode.removeChild(arguments[t])===arguments[t]&&i++;return arguments.length>0&&i===arguments.length},clear:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}};e.exports=a},function(e,t,i){"use strict";var a=i(3),n=i(0);function s(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],this.links={},a.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case n.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case n.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case n.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-layout",s.prototype.init=function(e){for(var t,i,n,s=this,o=function(e){var t,i;for(t=0;t<e.length;t++)"object"==typeof(i=e[t])?i instanceof a||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function c(){s.focusIndex=this.index}for(this.data=o,n=0;n<o.length;n++)"string"==typeof(t=o[n]).value?((i=document.createElement("div")).textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i),t.name&&(this.links[t.name]=i)):(this.$node.appendChild(t.value),t.name&&(this.links[t.name]=t.value)):t.value instanceof a?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",c),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this,t.name&&(this.links[t.name]=i)):(this.add(t.value),t.name&&(this.links[t.name]=t.value))):(i=document.createElement("div"),t.className&&(i.className=t.className),this.$node.appendChild(i),t.name&&(this.links[t.name]=i))},e.exports=s},function(e,t,i){"use strict";var a=i(19),n=i(7);function s(e){var t=this;e=e||{},this.handlers={},this.links={},this.$noData=null,e.propagate=void 0===e.propagate||e.propagate,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",a.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-layout-list",s.prototype.renderItemDefault=function(e,t){var i,a,s,o,c;if(e.ready&&this.fixedData)for(c=0;c<t.items.length;c++)"string"!=typeof(o=t.items[c]).value&&void 0!==o.value||((s=e.layout.$node.childNodes[c]).innerText=o.value||"",s.className=o.className||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);a={focusable:!1,data:t.items},t.className&&(a.className=t.className),i=new n(a),t.name&&(this.links[t.name]=i),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){i.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},s.prototype.setData=function(e){this.links={},a.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},s.prototype.init=function(e){var t;a.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&((t=document.createElement("div")).innerText=e.noData,this.$noData.appendChild(t))),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},s.prototype.renderItem=s.prototype.renderItemDefault,e.exports=s},function(e,t,i){"use strict";var a=i(37),n=i(3),s=i(0);function o(e){var t,i,n,o=this;(e=e||{}).events=e.events||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.events.click=e.events.click||function(){o.hide()},n=e.events.keydown,e.events.keydown=function(e){n&&n.call(this,e),e.code!==s.back&&e.code!==s.menu||(e.stop=!0,o.hide())},a.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),(t=document.createElement("div")).className="overlay",i=this.$body.parentNode.removeChild(this.$body),this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(i),this.$node.firstChild.firstChild.appendChild(t)}o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-modal",o.prototype.focus=function(){this.$node.classList.add("active"),a.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof n&&this.children[0].focus()},o.prototype.blur=function(){this.$node.classList.remove("active"),a.prototype.blur.call(this)},e.exports=o},function(e,t,i){"use strict";e.exports=i(41),e.exports.prototype.name="stb-component-scrollbar"},function(e,t,i){"use strict";e.exports=function(e,t){var i=[],a=[];function n(t){this.uri?t(!1,this.uri):e.getUrl(this.id,t)}return t.forEach(function(e){switch(e.type){case"video":i.push(e);break;case"sub":a.push({id:e.id,title:e.name,lang:e.languages[0]||"",uri:e.url,getUri:n})}}),i.sort(function(e,t){return t.quality?e.quality?t.quality.width-e.quality.width:-1:0}),{video:i,subtitles:a}}},function(e,t,i){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,i){"use strict";var a=i(2);e.exports={DOMContentLoaded:function(e){a.events["dom"]&&a.emit("dom",e)},load:function(e){a.events[e.type]&&a.emit(e.type,e)},unload:function(e){a.events[e.type]&&a.emit(e.type,e)},error:function(e){},keydown:function(e){var t,i=a.activePage,n={code:e.keyCode,stop:!1};e.ctrlKey&&(n.code+="c"),e.altKey&&(n.code+="a"),e.shiftKey&&(n.code+="s"),(t=i.activeComponent)&&t!==i&&(t.events[e.type]&&t.emit(e.type,n,e),!n.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,n,e)),n.stop||(i.events[e.type]&&i.emit(e.type,n,e),e.stop||a.events[e.type]&&a.emit(e.type,n,e))},keypress:function(e){var t=a.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=a.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,i){"use strict";var a=i(2);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+a.metrics.height+".css",document.head.appendChild(t)}},function(e,t,i){"use strict";e.exports=i(35),e.exports.prototype.name="stb-component-page"},function(e,t,i){"use strict";var a=i(3),n=i(0),s={};function o(e){var t,i=0,n=this;(e=e||{}).focusable=!1,e.visible=e.visible||!1,e.$body=document.createElement("div"),e.$body.className="body",a.call(this,e),this.tabs=[{codes:{}},{codes:{}},{codes:{}},{codes:{}}],this.tab=0,this.$table=this.$node.appendChild(document.createElement("table")),this.$table.insertRow(),this.$table.rows[0].insertCell(-1),this.$table.rows[0].insertCell(-1),this.$table.rows[0].insertCell(-1),this.$left=this.$table.rows[0].cells[0].appendChild(document.createElement("div")),this.$left.className="theme-icon",this.$table.rows[0].cells[1].className="central",(t=this.tabs[i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",(t=this.tabs[++i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",(t=this.tabs[++i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",(t=this.tabs[++i].$body=this.$table.rows[0].cells[1].appendChild(document.createElement("div"))).className="wrapper hidden",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",t.appendChild(document.createElement("div")),t.lastChild.className="button",t.lastChild.appendChild(document.createElement("div")),t.lastChild.appendChild(document.createElement("div")),t.lastChild.lastChild.className="title",this.$right=this.$table.rows[0].cells[2].appendChild(document.createElement("div")),this.$right.className="theme-icon",this.init(e.data),this.parent.addListener("keydown",function(e){var t=n.tabs[n.tab];n.visible&&t.codes[e.code]&&"function"==typeof t.codes[e.code].action&&t.codes[e.code].action()})}s[n.f1]="theme-icon-rc-f1",s[n.f2]="theme-icon-rc-f2",s[n.f3]="theme-icon-rc-f3",s[n.f4]="theme-icon-rc-f4",s[n.menu]="theme-icon-rc-menu",s[n.ok]="theme-icon-rc-ok",s[n.info]="theme-icon-rc-info",s[n.playPause]="theme-icon-rc-play-pause",s[n.back]="theme-icon-rc-back",s[n.exit]="theme-icon-rc-home",s[n.keyboard]="theme-icon-rc-vk",s[n.refresh]="theme-icon-rc-refresh",s[n.frame]="theme-icon-rc-aspect",o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-footer",o.prototype.init=function(e){var t,i,a;function n(t){return function(){"function"==typeof e.middle[t].action&&e.middle[t].action()}}if(e=e||{},this.tabs[this.tab].$body.classList.add("hidden"),this.tab=e.middle&&e.middle.length?e.middle.length-1:0,(i=this.tabs[this.tab]).codes={},e.left?(this.$left.className=e.left.className||"theme-icon "+(s[e.left.code]||"theme-icon-warning"),e.left.disabled?this.$left.classList.add("disabled"):(i.codes[e.left.code]={action:e.left.action},this.$left.style.visibility="inherit",this.$left.onclick=function(){"function"==typeof e.left.action&&e.left.action()})):"hidden"!==this.$left.style.visibility&&(this.$left.style.visibility="hidden"),e.right?(this.$right.className=e.right.className||"theme-icon "+(s[e.right.code]||"theme-icon-warning"),e.right.disabled?this.$right.classList.add("disabled"):(i.codes[e.right.code]={action:e.right.action},this.$right.style.visibility="inherit",this.$right.onclick=function(){"function"==typeof e.right.action&&e.right.action()})):"hidden"!==this.$right.style.visibility&&(this.$right.style.visibility="hidden"),e.middle&&e.middle.length){for(t=0;t<e.middle.length;t++)i.codes[e.middle[t].code]={action:e.middle[t].action},e.middle[t].disabled?i.$body.children[t].classList.add("disabled"):(i.$body.children[t].classList.remove("disabled"),i.$body.children[t].onclick=n(t)),(a=i.$body.children[t].children)[0].className="iconImg "+(e.middle[t].className||"theme-icon "+(s[e.middle[t].code]||"theme-icon-warning")),a[1].innerText=e.middle[t].title||"";i.$body.classList.remove("hidden")}},e.exports=o},function(e,t,i){"use strict";var a=i(3),n=i(0);function s(e){var t,i=this;function s(e){switch(e.code){case n.left:i.focusIndex>0&&i.panels[i.focusIndex-1].focus();break;case n.right:i.focusIndex<i.panels.length-1&&i.panels[i.focusIndex+1].focus()}}for((e=e||{}).focusable=e.focusable||!1,a.call(this,e),this.panels=e.panels,this.focusIndex=0,e.panels&&!e.panels[0].main&&(e.panels[0].$node.classList.add("left"),e.panels[0].$node.classList.add("expand")),e.panels&&e.panels[1]&&e.panels[1].main&&e.panels[1].$node.classList.add("position-right"),e.panels&&e.panels[2]&&e.panels[1].main&&e.panels[2].$node.classList.add("right"),e.panels&&this.add.apply(this,e.panels),t=0;t<this.panels.length;t++)this.panels[t].addListeners({keydown:s}),this.panels[t].index=t}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-panel-set",s.prototype.focus=function(){a.prototype.focus.call(this),this.panels[this.focusIndex].focus()},s.prototype.blur=function(){this.panels[this.focusIndex].blur()},e.exports=s},function(e,t,i){"use strict";var a=i(3),n=i(7);function s(e){var t;e=e||{},this.size=1,this.main=!1,this.index=0,e.$body=document.createElement("div"),e.$body.className="body",a.call(this,e),e.size&&(this.size=e.size,this.$node.classList.add("size"+e.size)),e.main&&(this.main=!0,this.$node.classList.add("main")),this.shadows={$left:document.createElement("div"),$right:document.createElement("div")},this.shadows.$left.className="shadow left",this.$node.appendChild(this.shadows.$left),this.shadows.$right.className="shadow right",this.$node.appendChild(this.shadows.$right),e.title&&(Array.isArray(e.title)||(e.title=[e.title]),this.title=new n({className:"title",data:e.title,focusable:!1}),this.$node.appendChild(this.title.$node)),this.$node.appendChild(this.$body),(t=document.createElement("div")).className="overlay",this.$node.appendChild(t)}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-panel",s.prototype.defaultEvents={focus:function(){this.children.length&&this.children[0].focus()}},s.prototype.focus=function(){this.focusable&&(this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),this.parent.panels[this.parent.focusIndex].$node.classList.remove("top"),a.prototype.focus.call(this),this.parent.focusIndex=this.index,this.$node.classList.add("active"),this.$node.classList.add("top"),0===this.index&&this.parent.panels[1]&&this.parent.panels[1].main?(this.parent.panels[1].$node.classList.remove("position-left"),this.parent.panels[1].$node.classList.add("position-right"),this.parent.panels[2]&&this.parent.panels[2].$node.classList.remove("expand"),this.$node.classList.add("expand")):2===this.index&&this.parent.panels[1].main&&(this.parent.panels[1].$node.classList.remove("position-right"),this.parent.panels[1].$node.classList.add("position-left"),this.parent.panels[0].$node.classList.remove("expand"),this.$node.classList.add("expand")))},s.prototype.blur=function(){this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),a.prototype.blur.call(this)},e.exports=s},function(e,t,i){"use strict";var a=i(3),n=i(0);function s(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),a.call(this,e),this.init(e)}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-list",s.prototype.TYPE_VERTICAL=1,s.prototype.TYPE_HORIZONTAL=2,s.prototype.renderItemDefault=function(e,t){e.innerText=t.value},s.prototype.renderItem=s.prototype.renderItemDefault,s.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?n.up:n.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?n.left:n.right)},keydown:function(e){switch(e.code){case n.up:case n.down:case n.right:case n.left:case n.pageUp:case n.pageDown:case n.home:case n.end:this.move(e.code);break;case n.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},s.prototype.init=function(e){var t,i,a=this,n=this.$body.children.length,s=function(e){this.data&&(a.focusItem(this),a.events["click:item"]&&a.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){a.events[t]=null,a.addListener(t,e.events[t])}),this.size!==n)for(n>0&&(this.$body.innerText=null),i=0;i<this.size;i++)(t=document.createElement("div")).index=i,t.className="item",t.addEventListener("click",s),this.$body.appendChild(t);if(this.provider){if(this.provider.blocked)return;this.provider.get(null,function(t,i){t?a.events["data:error"]&&a.emit("data:error",t):(i&&(e.data=i,a.setData(e),a.scroll&&a.scroll.init({realSize:a.provider.maxCount,viewSize:a.provider.size,value:a.provider.head+a.provider.pos})),a.events["data:get"]&&a.emit("data:get"))})}else e.data&&this.setData(e)},s.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},s.prototype.renderView=function(e){var t,i,a,n,s;if(this.viewIndex!==e){for(n=this.viewIndex,this.viewIndex=s=e,i=0;i<this.size;i++)t=this.$body.children[i],(a=this.data[e])?(t.data=a,t.index=e,this.renderItem(t,a),a.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:n,currIndex:s}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},s.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case n.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case n.up:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index>0)this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a||0===a?a:t.$focusItem.index})})}else this.cycle&&this.move(n.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case n.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case n.down:if(i||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index<this.data.length-1)this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a||0===a?a:t.$focusItem.index})})}else this.cycle&&this.move(n.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case n.pageUp:if(this.provider){if(this.provider.blocked)return;return void this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a||0})})}this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case n.pageDown:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,a){var n;e?t.events["data:error"]&&t.emit("data:error",e):i&&(n=a||0===a?a:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:n}))});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case n.home:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case n.end:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,i,a){var n;e?t.events["data:error"]&&t.emit("data:error",e):i&&(n=a||0===a?a:i.length<t.size?i.length-1:t.size-1,t.setData({data:i,focusIndex:n}))});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},s.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},s.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},s.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},s.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=s},function(e,t,i){"use strict";e.exports=function(e,t,i){var a,n,s,o=null;if(e&&0!==e.length)if(1===e.length)o=e[0];else for(t.length?(t.length>1&&(s=t[1]),""!==(n=t[0])||s&&""!==s||i.languages.length&&(n=i.languages[0])):i.languages.length&&(n=i.languages[0]),a=0;a<e.length;a++)if(e[a].value&&(-1!==e[a].value.languages.indexOf(n)||s&&-1!==e[a].value.languages.indexOf(s))){if(e[a].value.quality.width===i.quality.width){o=e[a];break}if(e[a].value.quality.width>i.quality.width){o={value:e[a].value,index:a};continue}o={value:e[a].value,index:a};break}return o}},function(e,t,i){"use strict";e.exports=function(e){var t,i;return e-=3600*(i=Math.floor(e/3600)),e-=60*(t=Math.floor(e/60)),(i=i||"0")+":"+(t=t?t>9?t:"0"+t:"00")+":"+(e=e>9?e:"0"+e)}},function(e,t,i){"use strict";var a=i(1),n=i(0);function s(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",this.step=5,this.realHeight=0,this.viewHeight=0,this.topPosition=0,this.scroll=null,a.call(this,e),this.$node.appendChild(this.$body),this.init(e)}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.name="mag-component-scroll-area",s.prototype.defaultEvents={keydown:function(e){switch(e.code){case n.up:case n.down:this.move(e.code)}},mousewheel:function(e){this.move(e.wheelDeltaY>0?n.up:n.down)}},s.prototype.move=function(e){var t=screen.height,i=this.viewHeight-this.realHeight;if(i<0)switch(e){case n.down:if(this.topPosition-this.step*t/100<i)return this.scroll.scrollTo(-i),this.$body.style.top=i+"px",void this.emit("overflow",{direction:e});this.topPosition-=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px";break;case n.up:if(this.topPosition+this.step*t/100>0)return this.scroll.scrollTo(0),this.$body.style.top="0px",void this.emit("overflow",{direction:e});this.topPosition+=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px"}else this.emit("overflow",{direction:e})},s.prototype.init=function(e){e=e||{},this.realHeight=this.$body.offsetHeight,this.viewHeight=this.$node.offsetHeight,this.topPosition=0,this.$body.style.top=this.topPosition+"px",e.scroll&&(this.scroll=e.scroll),e.step&&(this.step=e.step),this.scroll&&this.scroll.init({realSize:this.realHeight,viewSize:this.viewHeight,value:this.topPosition})},e.exports=s},function(e,t,i){"use strict";i(0);var a=i(4);a.once("load",function(){a.api=core.plugins.videoBackend,a.api.config={sort:"",genreId:"",categoryId:"",favorite:!1,search:"",limit:0},i(32).load({name:core.environment.language},function(e){a.pages={main:i(34),info:i(46)},a.route(a.pages.main)})})},function(e,t,i){"use strict";var a=i(2),n=i(13);window.core=window.parent.getCoreInstance(window,a),i(27),i(28),i(14)("sdk"),i(30),i(14)("app"),a.platform="mag",a.ready=function(){window.core.call("app:ready")},a.exit=function(){a.events["exit"]&&a.emit("exit"),core.call("exit")},n.load=function(e){document.body.setAttribute("platform",a.platform),core.ready?a.events["load"]&&a.emit("load",{}):core.once("load",function(){a.events[e.type]&&a.emit(e.type,e)})},n.contextmenu=function(e){e.preventDefault()},Object.keys(n).forEach(function(e){window.addEventListener(e,n[e])}),e.exports=a},function(e,t,i){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(i+"="+encodeURIComponent(e[i]))}),t.join("&")}}},function(e,t,i){"use strict";e.exports={}},function(e,t,i){"use strict";if(!document.documentElement.classList){var a=Array.prototype,n=a.indexOf,s=a.slice,o=a.push,c=a.splice,l=a.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)o.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(o.call(this,e),this._element.className=s.call(this,0).join(" "))},contains:function(e){return-1!==n.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=n.call(this,e);-1!==t&&(c.call(this,t,1),this._element.className=s.call(this,0).join(" "))},toString:function(){return l.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";var a=i(2),n=i(29);a.metrics=n[a.query.screenHeight]||n[screen.height]||n[720],a.metrics.availHeight=a.metrics.height-(a.metrics.availTop+a.metrics.availBottom),a.metrics.availWidth=a.metrics.width-(a.metrics.availLeft+a.metrics.availRight)},function(e,t,i){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48,leftList:6},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54,leftList:6},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40,leftList:7},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60,leftList:7}}},function(e,t,i){"use strict";var a,n=i(2);(a=document.createElement("link")).rel="stylesheet",a.href=window.core.theme.path+n.metrics.height+".css",document.head.appendChild(a),e.exports=a},function(e,t,i){"use strict";var a={timer:0,pressed:!1,fired:!1},n=600;e.exports=function(e,t){var i=t.code,s=t.emitCode;function o(t,i){var a,n,s=e.activePage,o={code:t.keyCode,stop:!1};a=(i=i||{}).type||t.type,t.ctrlKey&&(o.code+="c"),t.altKey&&(o.code+="a"),t.shiftKey&&(o.code+="s"),i.code&&(o.code=i.code),(n=s.activeComponent)&&n!==s&&(n.events[a]&&n.emit(a,o,t),!o.stop&&n.propagate&&n.parent&&n.parent.events[t.type]&&n.parent.emit(a,o,t)),o.stop||(s.events[a]&&s.emit(a,o,t),t.stop||e.events[a]&&e.emit(a,o,t))}window.addEventListener("keydown",function(t){e.activePage,t.keyCode!==i||a.pressed?t.keyCode!==i&&o(t):(a.fired&&(a.fired=!1),a.pressed=!0,clearTimeout(a.timer),a.timer=setTimeout(function(){o(t,{code:s}),a.fired=!0},n))}),window.addEventListener("keyup",function(e){e.keyCode===i&&(!a.fired&&a.pressed&&(clearTimeout(a.timer),o(e,{type:"keydown"})),a.pressed=!1)})}},function(e,t,i){"use strict";var a=i(5),n=i(33),s=new a;function o(e){var t=new n(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}s.defaultLanguage="en",s.load=function(e,t){var i;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===s.defaultLanguage?(o(),t(null),!1):((i=new XMLHttpRequest).onload=function(){try{o(JSON.parse(i.responseText)),t(null),s.events["load"]&&s.emit("load")}catch(e){i.onerror(e)}},i.ontimeout=i.onerror=function(e){o(),t(e),s.events["error"]&&s.emit("error",e)},i.open("GET",e.path+"/"+e.name+"."+e.ext,!0),i.send(null),!0)},e.exports=s},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,i){"use strict";var a,n,s,o,c,l,r,d,h,u,m,p,f,v,g,y,k=new(i(15))({$node:document.getElementById("pageMain")}),b=i(6),w=i(0),x=i(16),$=i(17),T=i(18),C=i(8),I=i(36),N=i(4),B=i(9),z=i(39),_=i(10),E=i(42),L=i(11),S=i(20),D=i(43),j=i(21),P=i(44),A=new x({visible:!1,parent:k}),O=new C({cycle:!0,data:[],fixedData:!0,size:N.metrics.leftList,events:{blur:function(){C.prototype.blur.call(this),A.hide()},focus:function(){A.show()}}}),R=new T({title:[{value:gettext("Menu"),className:"name"}],events:{focus:function(){T.prototype.defaultEvents.focus.call(this),A.init({left:{code:w.menu,action:function(){a.panels[a.focusIndex]===R&&(a.blur(),A.hide(),s.show(),s.focus())}},middle:[{code:w.f1,title:gettext("Reset filters"),action:n}]})}},children:[O]}),q=b.tag("div",{className:"amount"},"0"),V=new T({title:[{value:gettext("Films"),className:"name"},b.tag("div",{className:"amountContainer"},q)],main:!0}),M=new T({title:[{value:gettext("Info"),className:"name"}],events:{keydown:function(e){switch(e.code){case w.ok:o.$focusItem.data.value.censored||o.$focusItem.data.value.category.censored?core.accessControl.request(function(e){e||N.route(N.pages.info,{info:o.$focusItem.data.value||{}})}):N.route(N.pages.info,{info:o.$focusItem.data.value||{}})}},focus:function(){T.prototype.defaultEvents.focus.call(this),A.hide()}},children:[P.textArea,P.textArea.scroll]}),H=86400,K={size:7,pages:2},U=[gettext("By name"),gettext("By rating"),gettext("By imdb rating"),gettext("By kinopoisk rating"),gettext("By date")],Y={placeholder:gettext("Search"),value:""},F={};function G(e,t){var i=o.$focusItem,a=i.layout.links.$favorite;e===i.data.value&&(e.favorite?(a.classList.add("hidden"),i.data.items[2].className="theme-icon theme-icon-favorite-active active hidden"):(a.classList.remove("hidden"),i.data.items[2].className="theme-icon theme-icon-favorite-active active")),e.changeFlags({favorite:!e.favorite},function(n,s){n&&e===i.data.value&&(e.favorite?(a.classList.remove("hidden"),i.data.items[2].className="theme-icon theme-icon-favorite-active active"):(a.classList.add("hidden"),i.data.items[2].className="theme-icon theme-icon-favorite-active active hidden")),t&&t(n,s)})}function W(e){var t,i,a,n,s,c,l,r=o.$focusItem.value,d=0,h=r.name,u=[],m=[],p={series:0,seasons:0};function f(o,f){var v;o||(i=null,t=null,r["is_tv_series"]&&(p.series+1<u.length&&(i=function(){var e=m[p.seasons];d=++p.series,e.name=e.name?e.name+(e.original_name?" ( "+e.original_name+" )":""):gettext("Season")+" "+e.number,h=r.name+" "+e.name+" "+(u[d].name?u[d].name+(u[d].original_name?" ( "+u[d].original_name+" )":""):gettext("Series")+" "+u[d].number),u[d].files&&u[d].files.length?l(u[d].files):r.getEpisode({seasonId:e.id,episodeId:u[d].id},function(e,t){e||l(t.files)})}),p.series>0&&(t=function(){var e=m[p.seasons];d=--p.series,e.name=e.name?e.name+(e.original_name?" ( "+e.original_name+" )":""):gettext("Season")+" "+e.number,h=r.name+" "+e.name+" "+(u[d].name?u[d].name+(u[d]["original_name"]?" ( "+u[d]["original_name"]+" )":""):gettext("Series")+" "+u[d].number),u[d].files&&u[d].files.length?l(u[d].files):r.getEpisode({seasonId:e.id,episodeId:u[d].id},function(e,t){e||l(t.files)})})),v=e||0,n=core.intent({action:"play",mime:"content/video",data:{title:h,uri:f,movie:r,file:c,position:v,subtitles:s,mediaId:c.id},events:{hide:function(){k.saveVideo(null,{intent:n,playerContext:a},!0),a=null,n.close()},end:function(){k.saveVideo(null,{intent:n,playerContext:a},!0),i?i():(a=null,n.close())},error:function(){a=null,n.close()},stop:function(){a=null,n.close()},next:i,prev:t,close:function(){k.saveVideo(null,{intent:n,playerContext:a})}},context:a},function(e,t){a=t}))}l=function(t){var i=L(r,t);if(s=i.subtitles,(i=i.video).length){if(a&&!e){if(!(c=S(i,a.metadata.audioLang,n.data.file)))return a=null,void n.close();c=c.value}else if(c=i[0],r["last_watched_file_id"]&&e)for(d=0;d<i.length;d++)if(i[d].id===r["last_watched_file_id"]){c=i[d];break}c.url?f(!1,c.url):r.getUrl(c.id,f)}},r["is_tv_series"]?r.getSeasons(function(t,i){var a;if(!t&&i.length){if(a=i[0],m=i,r["last_watched_season_id"]&&e){for(d=0;d<i.length;d++)if(i[d].id===r["last_watched_season_id"]){a=i[d],p.seasons=d;break}}else p.seasons=0;r.getSeries(a.id,function(t,i){if(!t&&i.length){if(u=i,r["last_watched_episode_id"]&&e){for(d=0;d<i.length;d++)if(i[d].id===r["last_watched_episode_id"]){p.series=d;break}}else p.series=0;a.name=a.name?a.name+(a.original_name?" ( "+a.original_name+" )":""):gettext("Season")+" "+a.number,h=r.name+" "+a.name+" "+(u[d].name?u[d].name+(u[d].original_name?" ( "+u[d].original_name+" )":""):gettext("Series")+" "+u[d].number),u[d].files&&u[d].files.length?l(u[d].files):r.getEpisode({seasonId:a.id,episodeId:u[d].id},function(e,t){e||l(t.files)})}})}}):l(r.files)}function Z(e,t){P.clear(),N.api.getList(t,function(t,i,a){q.innerHTML=t?0:a,e(t,D(i),a)})}function X(){var e=o.$focusItem.data.value;"not_ended"===e["watched_status"]?(d.show(e),d.focus()):(l.show(),l.focus())}n=function(){(""!==N.api.config.genreId||""!==N.api.config.categoryId||""!==N.api.config.search||N.api.config.favorite)&&(N.api.config={sortby:N.api.config.sortby,genreId:"",categoryId:"",favorite:!1,search:"",limit:0,offset:0},o.setData({data:[]}),o.init({provider:new I({pageSize:K.size,cacheSize:K.pages,request:N.api.config,getter:Z,checkTime:H,cycle:!0}),focusIndex:0}),u.$checkedData&&(u.$checkedData.state=!1,u.data[0].state=!0),u.setData({data:u.data,focusIndex:0}),r.$checkedData&&(r.$checkedData.state=!1,r.data[0].state=!0),O.links.categories.links.$text.innerText=gettext("All categories"),O.links.categories.links.$icon.classList.remove("active"),O.links.genres.links.$text.innerText=gettext("All genres"),O.links.genres.links.$icon.classList.remove("active"),Y.value="",O.links.search.links.$text.innerText=Y.placeholder,O.links.search.links.$icon.classList.remove("active"),O.links.favorite.links.$icon.className="theme-icon theme-icon-favorite",r.setData({data:r.data,focusIndex:0}))},a=new $({visible:!1,panels:[R,V,M]}),k.add(a),c={play:{items:[{className:"theme-icon theme-icon-play"},{className:"title",value:gettext("Play")}],click:function(){l.hide(),o.$focusItem.data.value.censored||o.$focusItem.data.value.category.censored?core.accessControl.request(function(e){e||W()}):W()}},favorite:{name:"favorite",items:[{name:"$icon",className:"theme-icon theme-icon-favorite"},{name:"$title",className:"title",value:gettext("Add to favorite")}],click:function(){l.hide(),d.hide(),G(o.$focusItem.data.value)}},watched:{name:"watchedStatus",items:[{name:"$icon",className:"theme-icon theme-icon-ok"},{name:"$title",className:"title",value:gettext("Mark as watched")}],click:function(){var e,t,i;l.hide(),d.hide(),e="watched"!==o.$focusItem.data.value["watched_status"],t=o.$focusItem.data.value,i=o.$focusItem,t.changeFlags({"watched_status":e?"watched":"not_watched"},function(a,n){var s;!a&&n&&(t["watched_status"]=s=e?"watched":"not_watched",i.data.items[3].className=e?"theme-icon theme-icon-ok":"theme-icon theme-icon-ok hidden",i.layout.links.$status.className=i.data.items[3].className,t["is_tv_series"]||t.files.forEach(function(e){e["watched_status"]=s}))})}},continueWatch:{name:"continueWatch",items:[{className:"theme-icon"},{name:"$title",className:"title",value:gettext("Continue watching from")}],click:function(){d.hide(),d.videoData.censored||d.videoData.category&&d.videoData.category.censored?core.accessControl.request(function(e){e||W(d.videoData["watched_time"]||0)}):W(d.videoData["watched_time"]||0)}},watchAgain:{items:[{className:"theme-icon"},{name:"$title",className:"title",value:gettext("Watch again")}],click:function(){d.hide(),o.$focusItem.data.value.censored||o.$focusItem.data.value.category.censored?core.accessControl.request(function(e){e||W()}):W()}}},l=new B({title:gettext("Actions"),className:"width2x",events:{show:function(){var e=o.$focusItem.data.value,t=g.links.favorite.links,i=g.links.watchedStatus.links;e.favorite?(t.$icon.className="theme-icon theme-icon-favorite-active active",t.$title.innerText=gettext("Remove from favorites")):(t.$icon.className="theme-icon theme-icon-favorite",t.$title.innerText=gettext("Add to favorite")),"watched"===e["watched_status"]?(i.$icon.className="theme-icon",i.$title.innerText=gettext("Remove from watched")):(i.$icon.className="theme-icon theme-icon-ok",i.$title.innerText=gettext("Mark as watched"))},hide:function(){a.focus()}},children:[g=new C({size:3,focusIndex:0,cycle:!0,fixedData:!0,data:[c.play,c.favorite,c.watched],events:{keydown:function(e){switch(C.prototype.defaultEvents.keydown.call(this,e),e.code){case w.menu:case w.back:l.hide(),e.stop=!0}}}})]}),k.add(l),d=new B({title:gettext("Actions"),className:"width2x",events:{show:function(e){var t=y.links.favorite.links,i=y.links.watchedStatus.links;this.videoData=e,this.children[0].focus(),this.$text.innerText=e.name,y.links.continueWatch.links.$title.innerText=gettext("Continue watching from")+" "+j(e["watched_time"]||0),e.favorite?(t.$icon.className="theme-icon theme-icon-favorite-active active",t.$title.innerText=gettext("Remove from favorites")):(t.$icon.className="theme-icon theme-icon-favorite",t.$title.innerText=gettext("Add to favorite")),"watched"===e["watched_status"]?(i.$icon.className="theme-icon",i.$title.innerText=gettext("Remove from watched")):(i.$icon.className="theme-icon theme-icon-ok",i.$title.innerText=gettext("Mark as watched"))},hide:function(){a.focus()}},children:[y=new C({size:4,focusIndex:0,cycle:!0,fixedData:!0,data:[c.continueWatch,c.watchAgain,c.favorite,c.watched],events:{keydown:function(e){switch(C.prototype.defaultEvents.keydown.call(this,e),e.code){case w.menu:case w.back:d.hide(),e.stop=!0}}}})]}),k.add(d),v=new B({visible:!1,title:gettext("Sort"),events:{show:function(){this.children[0].focus()}},children:[new z({focusIndex:0,size:3,cycle:!0,data:[{state:!0,title:gettext("By date"),value:"added"},{state:!1,title:gettext("By name"),value:"name"},{state:!1,title:gettext("By rating"),value:"rating"}],events:{"click:item":function(){v.hide(),a.focus()},select:function(e){O.links.sort.links.$text.innerText=e.$curr.data.title,o.setData({data:[]}),N.api.config.sortby=e.$curr.data.value,N.api.config.offset=0,N.api.config.limit=0,o.init({provider:new I({pageSize:K.size,cacheSize:K.pages,request:N.api.config,getter:Z,checkTime:H,cycle:!0}),focusIndex:0})},keydown:function(e){switch(z.prototype.defaultEvents.keydown.call(this,e),e.code){case w.back:v.hide(),a.focus(),e.stop=!0}}}})]}),k.add(v),f=new B({visible:!1,title:gettext("Categories"),events:{show:function(){this.children[0].focus()}},children:[r=new z({focusIndex:0,size:5,cycle:!0,scroll:m=new _,events:{"click:item":function(){f.hide(),a.focus()},select:function(e){O.links.categories.links.$text.innerText=e.$curr.data.title,e.$curr.data.value?O.links.categories.links.$icon.classList.add("active"):O.links.categories.links.$icon.classList.remove("active"),o.setData({data:[]}),N.api.config.categoryId=e.$curr.data.value,N.api.config.offset=0,N.api.config.limit=0,o.init({provider:new I({pageSize:K.size,cacheSize:K.pages,request:N.api.config,getter:Z,checkTime:H,cycle:!0}),focusIndex:0})},keydown:function(e){switch(z.prototype.defaultEvents.keydown.call(this,e),e.code){case w.back:f.hide(),a.focus(),e.stop=!0}}}}),m]}),k.add(f),p=new B({visible:!1,title:gettext("Genres"),events:{show:function(){this.children[0].focus()}},children:[u=new z({focusIndex:0,size:5,cycle:!0,scroll:m=new _,events:{"click:item":function(){p.hide(),a.focus()},select:function(e){O.links.genres.links.$text.innerText=e.$curr.data.title,e.$curr.data.value?O.links.genres.links.$icon.classList.add("active"):O.links.genres.links.$icon.classList.remove("active"),o.setData({data:[]}),N.api.config.genreId=e.$curr.data.value,N.api.config.offset=0,N.api.config.limit=0,o.init({provider:new I({pageSize:K.size,cacheSize:K.pages,request:N.api.config,getter:Z,checkTime:H,cycle:!0}),focusIndex:0})},keydown:function(e){switch(z.prototype.defaultEvents.keydown.call(this,e),e.code){case w.back:p.hide(),a.focus(),e.stop=!0}}}}),m]}),k.add(p),s=new B({title:gettext("Actions"),className:"width2x",events:{hide:function(){a.focus()}},children:[new C({size:1,focusIndex:0,cycle:!0,fixedData:!0,data:[{items:[{className:"theme-icon theme-icon-rc-f1"},{value:gettext("Reset filters")}],click:function(){s.hide(),n()}}],events:{keydown:function(e){switch(C.prototype.defaultEvents.keydown.call(this,e),e.code){case w.menu:case w.back:s.hide(),e.stop=!0}}}})]}),k.add(s),k.saveVideo=function(e,t,i){var a,n,s,c,l,r=o.$focusItem.data;function d(t,i){var n;if(!t&&i&&i.status){switch(a.file["watched_status"]=l["watched_status"],a.movie["watched_status"]=i["movie_watched_status"],a.movie["watched_status"]){case"watched":r.items[3].className="theme-icon theme-icon-ok",a.episode&&(a.episode.items[1].className="theme-icon theme-icon-ok");break;case"not_watched":r.items[3].className="theme-icon theme-icon-ok hidden",a.episode&&(a.episode.items[1].className="theme-icon theme-icon-ok hidden");break;case"not_ended":r.items[3].className="theme-icon theme-icon-ok disabled",a.episode&&(a.episode.items[1].className="theme-icon theme-icon-ok disabled")}if(i["season_watched_status"]&&a.season)switch(a.season.value["watched_status"]=i["season_watched_status"],a.season.value["watched_status"]){case"watched":a.season.items[1].className="theme-icon theme-icon-ok";break;case"not_watched":a.season.items[1].className="theme-icon theme-icon-ok hidden";break;case"not_ended":a.season.items[1].className="theme-icon theme-icon-ok disabled"}if(a.episode)for(n=0;n<a.episode.value.files.length;n++)if(a.episode.value.files[n].id===a.file.id){switch(a.episode.value.files[n]["watched_status"]=l["watched_status"],l["watched_time"]&&(a.episode.value.files[n]["watched_time"]=l["watched_time"]),a.episode.value["watched_status"]=l["watched_status"],l["watched_status"]){case"watched":a.episode.items[1].className="theme-icon theme-icon-ok";break;case"not_watched":a.episode.items[1].className="theme-icon theme-icon-ok hidden";break;case"not_ended":a.episode.items[1].className="theme-icon theme-icon-ok disabled"}break}l["watched_time"]&&(a.file["watched_time"]=l["watched_time"]),k.refreshList(),e&&e()}}t.intent.data&&t.playerContext&&(n=t.playerContext.metadata.position,s=t.playerContext.metadata.duration,a=t.intent.data,i?(l={"watched_status":"watched","watched_time":s-10},a.movie.changeWatchedFile(a.file.id,l,d)):n>10&&n&&s&&((c=n/s*100)>95?l={"watched_status":"watched","watched_time":n-10}:c>5&&(l={"watched_status":"not_ended","watched_time":n-10}),a.movie.changeWatchedFile(a.file.id,l,d)))},k.refreshList=function(e){var t;if(e)switch((t=o.$focusItem.data).value["watched_status"]){case"watched":t.items[3].className="theme-icon theme-icon-ok";break;case"not_watched":t.items[3].className="theme-icon theme-icon-ok hidden";break;case"not_ended":t.items[3].className="theme-icon theme-icon-ok disabled"}o.data.length&&o.$focusItem&&o.setData({data:o.data,focusIndex:o.$focusItem.index})},k.once("show",function(){var e,t=[{name:"search",items:[{name:"$icon",className:"theme-icon theme-icon-search"},{name:"$text",value:gettext("Search"),className:"inputSearchField"}],click:function(e){core.intent({action:"keyboard",data:{value:Y.value,title:gettext("VIDEO SEARCH")},events:{done:function(t){Y.value=t.value,t.value?(e.layout.links.$text.innerText=t.value,e.layout.links.$icon.classList.add("active")):(e.layout.links.$text.innerText=Y.placeholder,e.layout.links.$icon.classList.remove("active")),N.api.config.search!==t.value&&(N.api.config.search=t.value,N.api.config.offset=0,N.api.config.limit=0,o.init({provider:new I({pageSize:K.size,cacheSize:K.pages,request:N.api.config,getter:Z,checkTime:0,cycle:!0}),focusIndex:0}))}}},function(e){})}},{name:"favorite",items:[{name:"$icon",className:"theme-icon theme-icon-favorite"},{value:gettext("Favorite")}],click:function(e){N.api.config.favorite?e.layout.links.$icon.className="theme-icon theme-icon-favorite":e.layout.links.$icon.className="theme-icon theme-icon-favorite-active active",o.setData({data:[]}),N.api.config.favorite=!N.api.config.favorite,N.api.config.offset=0,N.api.config.limit=0,o.init({provider:new I({pageSize:K.size,cacheSize:K.pages,request:N.api.config,getter:Z,checkTime:H,cycle:!0}),focusIndex:0})}},{name:"genres",items:[{name:"$icon",className:"theme-icon theme-icon-genres"},{name:"$text",value:gettext("All genres"),className:"theme-item-more"}],click:function(){a.blur(),p.show(),p.focus()}},{name:"categories",items:[{name:"$icon",className:"theme-icon theme-icon-categories"},{name:"$text",value:gettext("All categories"),className:"theme-item-more"}],click:function(){a.blur(),f.show(),f.focus()}},{name:"sort",items:[{name:"$icon",className:"theme-icon theme-icon-sort-az"},{name:"$text",value:U[N.api.config.sortby]||gettext("By date"),className:"theme-item-more"}],click:function(){a.blur(),v.show(),v.focus()}}];N.api.config.offset=0,N.api.config.limit=0,t.push({items:[{className:"theme-icon theme-icon-exit"},{value:gettext("Exit")}],click:E.goExit}),O.setData({focusIndex:O.$focusItem?O.$focusItem.index:0,data:t}),(o=new C({provider:new I({pageSize:K.size,cacheSize:K.pages,request:N.api.config,getter:Z,checkTime:H,cycle:!0}),events:{focus:function(){A.init({left:{code:w.menu,action:function(){a.panels[a.focusIndex]===V&&(a.blur(),A.hide(),X())}},middle:[{code:w.f3,title:gettext("Favorite"),action:function(){a.panels[a.focusIndex]===V&&G(o.$focusItem.data.value)}}],label:{code:w.menu,title:gettext("Hold OK button to open Options menu"),action:function(){a.panels[a.focusIndex]===V&&(a.blur(),A.hide(),X())}}}),A.show()},"focus:item":e=function(e){F.info&&clearTimeout(F.info),F.info=setTimeout(function(){var t=e.$curr;t&&(t.data.value&&(t.data.value.censored||t.data.value.category&&t.data.value.category.censored)&&!core.accessControl.state?P.showLock():(P.showInfo(),P.fill(t.data.value)))},core.environment.onFocusDebounceTimeout)},"move:view":e,"click:item":function(e){e.$item.data.value&&(e.$item.data.value.censored||e.$item.data.value.category&&e.$item.data.value.category.censored)?core.accessControl.request(function(t){t||N.route(N.pages.info,{info:e.$item.data.value})}):N.route(N.pages.info,{info:e.$item.data.value||{}})},"data:error":function(e){}},size:K.size,render:i(45),fixedData:!0,className:"videoList padded",noData:gettext("No films"),focusIndex:0,scroll:h=new _({})})).once("data:error",function(){o.focus(),N.ready()}),o.once("data:get",function(){o.focus(),N.api.getCategories(function(e,t){var i,a=[];for(t=t.data||[],a.push({state:!0,title:gettext("All categories"),value:""}),i=0;i<t.length;i++)a.push({state:!1,title:t[i].name,value:t[i].id});r.setData({data:a,focusIndex:0}),N.api.getGenres(function(e,t){for(a=[],t=t.data||[],a.push({state:!0,title:gettext("All genres"),value:""}),i=0;i<t.length;i++)a.push({state:!1,title:t[i].name,value:t[i].ids.join(",")});u.setData({data:a,focusIndex:0})})}),N.ready()}),V.add(o),V.add(h),V.focus()}),k.addListeners({show:function(){a.show(),a.focus()},keydown:function(e){switch(e.code){case w.back:a.blur(),E.goBack()}}}),N.addListener("change:favorite",function(e){G((e=e||{}).video,e.callback)}),core.addListeners({show:function(e){switch(e.source){case core.SOURCES.LAUNCHER:if(N.api.config.search)return;o.setData({data:[]}),N.api.config.offset=o.provider.head,N.api.config.imit=o.provider.tail-o.provider.head,o.init({provider:new I({pageSize:K.size,cacheSize:K.pages,checkTime:H,pos:o.provider.pos,request:N.api.config,getter:Z,cycle:!0,headItem:o.provider.headItem}),focusIndex:o.$focusItem?o.$focusItem.index:0})}},intent:function(e,t){if("videoClub"===e.action)switch(e.mime){case"info":e.data?(N.pages.info===N.activePage?N.pages.info.emit("show",{data:{info:e.data,type:"intent",callback:t}}):N.route(N.pages.info,{info:e.data,type:"intent",callback:t}),t(!1,null)):t(!0,null);break;default:N.route(N.pages.main),t(!1,null)}}}),e.exports=k},function(e,t,i){"use strict";var a=i(1);function n(e){e=e||{},this.active=!1,this.activeComponent=null,a.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.name="spa-component-page",e.exports=n},function(e,t,i){"use strict";var a=i(0),n=0;function s(e){e=e||{},this.size=e.pageSize,this.stepSize=e.stepSize||1,this.data=[],this.head=0,this.tail=0,this.pos=e.pos||0,this.cacheSize=(e.cacheSize||2)*this.size,this.config=e.request||{},this.botEmptyLine=!1,this.maxCount=e.count||0,this.headItem=e.headItem,this.lastChecked=0,this.checkTime=1e3*e.checkTime||0,this.cycle=e.cycle,this.getter=e.getter,this.blocked=!1,n=0}s.prototype.constructor=s,s.prototype.get=function(e,t){var i=this,s=[],o=new Date;if(!this.blocked)switch(e){case null:this.blocked=!0,this.config.offset?(this.head=this.config.offset,(!this.config.limit||this.config.limit<0)&&(this.config.limit=2*this.cacheSize)):(!this.config.limit||this.config.limit<0)&&(this.config.limit=this.cacheSize),this.getter(function(e,a,c){if(i.headItem&&!i.config.offset&&(a.unshift(i.headItem),n=1),i.lastChecked=o.getTime(),e)t(!0,a);else{if(i.maxCount=c,i.data=a,i.tail=i.head+a.length,i.maxCount&&i.head>=i.maxCount)return void i.goEnd(t,!0);a.length<i.config.limit&&(i.botEmptyLine=!0),i.pos+i.size<i.data.length?(s=i.data.slice(i.pos,i.pos+i.size),t(e,s),i.checkNext()):i.checkNext(t)}i.blocked=!1},this.config);break;case a.right:case a.down:if(this.pos+=this.stepSize,this.checkTime&&o.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(t);this.pos+this.size<this.data.length?(s=this.data.slice(this.pos,this.pos+this.size),t(!1,s),this.checkNext()):this.checkNext(t);break;case a.pageDown:if(this.pos+=this.size-1,this.checkTime&&o.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(t);this.pos+this.size<this.data.length?(s=this.data.slice(this.pos,this.pos+this.size),t(!1,s),this.checkNext()):this.checkNext(t);break;case a.left:case a.up:if(this.pos-=this.stepSize,this.checkTime&&o.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(t);this.pos>=0?(s=this.data.slice(this.pos,this.pos+this.size),t(!1,s),this.checkPrev()):this.checkPrev(t);break;case a.pageUp:if(this.pos-=this.size-1,this.checkTime&&o.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(t);this.pos>0?(s=this.data.slice(this.pos,this.pos+this.size),t(!1,s),this.checkPrev()):this.checkPrev(t);break;case a.home:this.goHome(t);break;case a.end:this.goEnd(t)}},s.prototype.checkNext=function(e){var t=this.cacheSize+this.pos-this.data.length,i=this,a=new Date;if(this.botEmptyLine){if(this.pos>this.data.length-this.size){if(this.cycle)return void this.goHome(e);this.pos=this.data.length-this.size,this.pos<0&&(this.pos=0)}e&&e(!1,this.data.slice(this.pos,this.pos+this.size))}else if(t>=this.size){if(this.maxCount&&t+this.tail>this.maxCount&&(t=this.maxCount-this.tail)<=0)return i.pos>i.data.length-i.size&&(i.pos=i.data.length-i.size,i.pos<0&&(i.pos=0)),e&&e(!1,i.data.slice(i.pos,i.pos+i.size)),void(this.botEmptyLine=!0);this.config.limit=t,this.config.offset=this.tail-n,this.blocked=!0,this.getter(function(n,s,o){n||(i.maxCount=o,s.length<t&&(i.botEmptyLine=!0),s.length&&(i.data=i.data.concat(s),t=i.data.length-2*i.cacheSize,i.tail+=s.length,t>0&&(i.data.splice(0,t),i.pos-=t,i.head+=t)),i.pos>i.data.length-i.size&&(i.pos=i.data.length-i.size,i.pos<0&&(i.pos=0))),i.lastChecked=a.getTime(),i.blocked=!1,e&&e(n,i.data.slice(i.pos,i.pos+i.size))},this.config)}},s.prototype.checkPrev=function(e){var t=this.cacheSize-this.pos,i=this,a=new Date;if(this.head>0)t>=this.size&&(t>this.head&&(t=this.head),this.config.offset=this.head-t-n,this.config.offset<0&&(this.config.offset=0,t-=n),this.config.limit=t,this.blocked=!0,this.getter(function(n,s,o){n||(i.maxCount=o,i.data=s.concat(i.data),0===i.config.offset&&i.headItem&&i.data[0]!==i.headItem&&i.data.unshift(i.headItem),i.tail-=s.length,i.pos+=s.length,t=i.data.length-2*i.cacheSize,i.head-=t,t>0&&(i.data.splice(-t),i.botEmptyLine=!1)),i.lastChecked=a.getTime(),i.blocked=!1,e&&e(n,i.data.slice(i.pos,i.pos+i.size))},this.config));else{if(this.headItem&&this.data[0]!==this.headItem&&this.data.unshift(this.headItem),this.pos<0){if(this.cycle)return void this.goEnd(e);this.pos=0}e&&e(!1,i.data.slice(i.pos,i.pos+i.size))}},s.prototype.goHome=function(e,t){var i=[],a=this,n=new Date;if(0!==this.head||t)this.blocked=!0,this.pos=0,this.head=0,this.config.offset=0,this.config.limit=this.cacheSize,this.getter(function(t,s,o){t||(a.maxCount=o,a.data=s,a.headItem&&a.data[0]!==a.headItem&&a.data.unshift(a.headItem),a.tail=a.data.length,i=a.data.slice(a.pos,a.pos+a.size),a.botEmptyLine=!1),a.lastChecked=n.getTime(),a.blocked=!1,e(t,i,0)},this.config);else{if(this.pos=0,this.checkTime&&n.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(e);i=this.data.slice(this.pos,this.pos+this.size),e(!1,i,0)}},s.prototype.goEnd=function(e,t){var i,a=[],n=this,s=new Date;if(this.maxCount)if(this.tail!==this.maxCount||t)this.blocked=!0,this.head=this.maxCount-2*this.cacheSize,this.head<0&&(this.head=0),this.config.offset=this.head,this.config.limit=2*this.cacheSize,this.getter(function(t,o,c){t||(n.maxCount=c,n.data=o,n.pos=n.data.length-n.size,n.tail=n.head+o.length,n.pos<0&&(n.pos=0),a=n.data.slice(n.pos,n.pos+n.size),(i=a.length-1)<0&&(i=0),n.botEmptyLine=!0),n.blocked=!1,n.lastChecked=s.getTime(),e(t,a,i)},this.config);else{if(this.checkTime&&s.getTime()>this.lastChecked+this.checkTime)return void this.refreshData(function(t){t||n.goEnd(e)});n.pos=n.data.length-n.size,n.pos<0&&(n.pos=0),a=n.data.slice(n.pos,n.pos+n.size),(i=a.length-1)<0&&(i=0),n.botEmptyLine=!0,e(!1,a,i)}else e(!0)},s.prototype.refreshData=function(e){var t=this,i=[],a=new Date;this.pos<0&&(this.pos=0),this.config.offset=this.head,this.config.limit=this.tail-this.head,this.config.limit<=0&&(this.config.limit=0===this.config.offset?this.cacheSize:2*this.cacheSize),this.blocked=!0,this.getter(function(s,o,c){if(t.headItem&&!t.config.offset&&(o.unshift(t.headItem),n=1),s)e(s,o);else{if(t.lastChecked=a.getTime(),t.maxCount=c,t.data=o,t.tail=t.head+o.length,t.maxCount&&t.head>=t.maxCount)return void t.goEnd(e,!0);o.length<t.config.limit&&(t.botEmptyLine=!0),t.pos+t.size<t.data.length?(i=t.data.slice(t.pos,t.pos+t.size),e(s,i),t.checkNext()):t.checkNext(e)}t.blocked=!1},this.config)},e.exports=s},function(e,t,i){"use strict";e.exports=i(38),e.exports.prototype.name="stb-component-modal"},function(e,t,i){"use strict";var a=i(1);function n(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",a.call(this,e),this.$node.appendChild(document.createElement("div").appendChild(this.$body).parentNode)}n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.name="spa-component-modal",e.exports=n},function(e,t,i){"use strict";var a=i(19),n=i(40),s=0;function o(e){var t=this;this.group="group "+s++,this.$checkedData=null,a.call(this,e),this.addListener("click:item",function(e){var i=e.$item;i.checkBox.set(!0),i.state=i.checkBox.value,i.data.state=i.checkBox.value,t.$checkedData!==i.data&&(t.emit("select",{$last:t.$checkedData,$curr:i}),t.$checkedData&&(t.$checkedData.state=!1),t.$checkedData=i.data)})}o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-radio-list",o.prototype.group=0,o.prototype.renderItemDefault=function(e,t){var i=document.createElement("table"),a=document.createElement("tr"),s=document.createElement("td"),o=new n({group:this.group});e.innerHTML="",t.state&&(o.set(!0),this.$checkedData=t),i.appendChild(a),s.appendChild(o.$node),s.className="checkBoxWrapper",a.appendChild(s),(s=document.createElement("td")).className="title",s.innerText=t.title||"",a.appendChild(s),e.checkBox=o,e.state=o.value,e.value=t.value,e.appendChild(i)},o.prototype.renderItem=o.prototype.renderItemDefault,e.exports=o},function(e,t,i){"use strict";var a=i(1),n=i(12),s={};function o(e){e=e||{},this.value=!!e.value,this.value&&(e.className+=" checked"),this.group=null,e.group&&(e.className+=" grouped",this.group=e.group,void 0===s[e.group]?s[e.group]=[this]:s[e.group].push(this)),a.call(this,e)}o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.name="spa-component-checkbox",o.prototype.defaultEvents={click:function(){this.set(!this.value)},keydown:function(e){e.code===n.enter&&this.set(!this.value)}},o.prototype.set=function(e){var t,i;if(this.value!==e){if(!this.value&&null!==this.group)for(t=0,i=s[this.group].length;t<i;t++)s[this.group][t].set(!1);return this.value=!this.value,this.$node.classList.toggle("checked"),this.events["change"]&&this.emit("change",{value:this.value}),!0}return!1},e.exports=o},function(e,t,i){"use strict";var a=i(1);function n(e){e=e||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,e.focusable=e.focusable||!1,e.type&&(this.type=e.type),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),a.call(this,e),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(e)}n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.name="spa-component-scrollbar",n.prototype.TYPE_VERTICAL=1,n.prototype.TYPE_HORIZONTAL=2,n.prototype.init=function(e){void 0!==(e=e||{}).realSize&&(this.realSize=e.realSize),void 0!==e.viewSize&&(this.viewSize=e.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==e.value&&this.scrollTo(e.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},n.prototype.scrollTo=function(e){return this.value!==e&&(0!==this.thumbRect.height&&0!==this.thumbRect.width||(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*e/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*e/(this.realSize-this.viewSize)+"px",this.events["change"]&&this.emit("change",{curr:e,prev:this.value}),e>=this.realSize&&(e=this.realSize,this.events["done"]&&this.emit("done")),this.value=e,!0)},e.exports=n},function(e,t,i){"use strict";var a=i(4),n={goBack:function(){core.call("stop")},goExit:function(e){var t,n=i(9),s=i(8),o=i(0),c=a.activePage.activeComponent;a.activePage.add(t=new n({title:gettext("Exit"),events:{show:function(){this.children[0].focus()},hide:function(){c.focus()}},children:[new s({className:"padded",size:2,focusIndex:0,data:[{items:[{value:gettext("Yes")}],click:function(){if("function"==typeof e&&e(!0))return t.hide(),void t.remove();t.hide(),t.remove(),a.exit()}},{items:[{value:gettext("No")}],click:function(){"function"==typeof e&&e(!1),t.hide(),t.remove(),a.mainPanelSet.focus()}}],events:{keydown:function(i){s.prototype.defaultEvents.keydown.call(this,i),i.code===o.back&&(i.stop=!0,"function"==typeof e&&e(!1),t.hide(),t.remove(),a.mainPanelSet.focus())}}})]})),t.show(),t.focus()}};e.exports=n},function(e,t,i){"use strict";e.exports=function(e){var t,i,a,n=[];return(e=e||[]).forEach(function(e){var s=e.genres.map(function(e){return e.name}),o=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div");switch(c.className="name",l.className="subData theme-text-disabled"+(s.length?" visible":""),c.innerText=t=e.name||e["original_name"],l.innerText=i=s.join(", "),o.appendChild(c),o.appendChild(l),e["watched_status"]){case"watched":a="theme-icon theme-icon-ok";break;case"not_watched":a="theme-icon theme-icon-ok hidden";break;case"not_ended":a="theme-icon theme-icon-ok disabled"}n.push({items:[{name:"$title",className:"title",value:o,htmlInstance:!0,realValue:{title:t,genre:i}},{name:"$lock",className:e.censored||e.category&&e.category.censored?"theme-icon theme-icon-lock disabled":"theme-icon theme-icon-lock disabled hidden"},{name:"$favorite",className:e.favorite?"theme-icon theme-icon-favorite-active active":"theme-icon theme-icon-favorite-active active hidden"},{name:"$status",className:a}],value:e})}),n}},function(e,t,i){"use strict";var a,n=i(6),s=i(10),o=i(22),c={},l=n.tag,r=l("div",{className:"info theme-icon theme-icon-lock"}),d=l("div",{className:"info poster"}),h=l("div",{className:"info actors"}),u=l("div",{className:"info director"}),m=l("div",{className:"info actors"});a=l("div",{},d,l("div",{className:"info title theme-subhead-color"},gettext("Rating:")),h,l("div",{className:"info title theme-subhead-color"},gettext("Director:")),u,l("div",{className:"info title theme-subhead-color"},gettext("Actors:")),m),c.textArea=new o({propagate:!0,step:5,scroll:new s({})}),c.textArea.$body.appendChild(a),c.textArea.$body.appendChild(r),c.clear=function(){d.style.backgroundImage="",a.style.display="none",m.innerText="",h.innerText="",u.innerText="",this.textArea.init()},c.showInfo=function(){a.style.display="block",r.style.display="none",this.textArea.init()},c.showLock=function(){a.style.display="none",r.style.display="block",this.textArea.init()},c.fill=function(e){e.cover?d.style.backgroundImage="url("+core.backend.host+e.cover+")":d.style.backgroundImage="",h.innerText=e["rating_imdb"]||e["rating_kinopoisk"],m.innerText=e.actors,u.innerText=e.director,c.textArea.init()},e.exports=c},function(e,t,i){"use strict";var a=i(7);e.exports=function(e,t){var i,n,s,o,c;if(e.ready)for(c=0;c<t.items.length;c++)"string"==typeof(o=t.items[c]).value||void 0===o.value?((s=e.layout.$node.childNodes[c]).innerText=o.value||"",s.className=o.className||""):o.htmlInstance&&(s=e.layout.$node.childNodes[c],e.domLinks.$title.innerText=o.realValue.title,e.domLinks.$genre.innerText=o.realValue.genre||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);n={focusable:!1,data:t.items},t.className&&(n.className=t.className),i=new a(n),e.domLinks={$title:t.items[0].value.firstChild,$genre:t.items[0].value.firstChild.nextSibling},e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){this.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}}},function(e,t,i){"use strict";var a,n,s,o,c,l,r,d,h,u,m,p,f,v,g,y,k,b,w,x,$,T,C,I,N,B,z=i(15),_=i(4),E=i(6),L=i(0),S=i(17),D=i(18),j=i(47),P=i(9),A=i(8),O=i(22),R=i(10),q=i(48),V=i(49),M=i(11),H=i(21),K=new z({$node:document.getElementById("pageInfo")}),U=new R({}),Y={active:1,file:1,season:2,series:3},F={},G=[],W=[],Z=null,X=E.tag;function J(){var e;0!==G.length?(e=G.pop(),Y.active=e.type,w.setData({focusIndex:e.focus,data:e.data}),k=e.title,d.title.links.$name.innerText=k):_.route(_.pages.main)}function Q(e,t){var a,n=i(20),s=e||w.$focusItem.value,o=Z.name,c=[],l=!1,d=!1,h=null,u=null;function m(){var e;(e=n(w.data.slice(1),c,t.intent.data.file))?(w.focusIndex(e.index),Q(e.value,t)):(t.playerContext=null,t.intent.close())}function p(e){var i=!0;switch(c=t.playerContext.metadata.audioLang,_.pages.main.saveVideo(function(){$(!0)},t,!0),Y.active){case Y.file:J(),i=!1;case Y.series:w.move(e),i&&(k=G[G.length-1].title),C(m)}}function f(){_.pages.main.saveVideo($,t),t.playerContext=null,t.intent.close()}if(t=t||{},Z["is_tv_series"]){switch(Y.active){case Y.file:l=(a=G[G.length-1]).focus+1<a.data.length,d=a.focus>1;break;case Y.series:l=w.$focusItem.index+1<w.data.length,d=w.$focusItem.index>1}l&&(u=function(){p(L.down)}),d&&(h=function(){p(L.up)})}function v(e,i){if(!e){if(Z["is_tv_series"]&&G.length&&(o+=" "+b+" "+k),s.watched_time&&"not_ended"===s.watched_status&&!t.playerContext)return r.blur(),x.show({file:s,movie:Z,callback:a,name:o}),void(t.intent&&t.intent.close());a(0)}function a(e){var a,n;Z["is_tv_series"]&&G.length&&(n=(n=G[G.length-1]).data[n.focus],a=(a=G[0]).data[a.focus]),t.intent=core.intent({action:"play",mime:"content/video",data:{title:o,uri:i,movie:Z,file:s,season:a,episode:n,position:e,subtitles:s.subtitleList,mediaId:s.id},events:{end:function(){_.pages.main.saveVideo($,t,!0),u?u():(t.playerContext=null,t.intent.close())},error:f,stop:f,hide:f,next:u,prev:h,close:function(){t.playerContext&&(_.pages.main.saveVideo($,t),t.playerContext=null)}},context:t.playerContext},function(e,i){t.playerContext=i})}}N={data:w.data,focus:w.$focusItem.index,type:Y.active},s.url?v(!1,s.url):Z.getUrl(s.id,v)}function ee(){Z.favorite?g.style.display="none":g.style.display="block",_.emit("change:favorite",{video:Z,callback:function(e){e&&(Z.favorite?g.style.display="block":g.style.display="none")}})}l=i(16),c=new l({visible:!1,parent:K}),C=function(e){var t=w.$focusItem.value,i=[];switch(Y.active){case Y.file:Q();break;case Y.season:G.push({type:Y.season,data:w.data,title:k,focus:w.$focusItem.index}),k=w.$focusItem.data.items[0].value,b=k,d.title.links.$name.innerText=b,F.seasonId=t.id,Z.getSeries(t.id,function(t,a){(i=t?[]:q(a,!0)).unshift({items:[{className:"theme-icon theme-icon-back"},{className:"title",value:". ."}],value:null}),Y.active=Y.series,w.setData({focusIndex:0,data:i}),e&&e()});break;case Y.series:G.push({type:Y.series,data:w.data,title:b,focus:w.$focusItem.index}),F.episodeId=t.id,k=w.$focusItem.data.items[0].value,Z.getEpisode(F,function(t,a){if(1===(i=t?[]:V(Z,a.files)).length&&!e)return Q(i[0].value),void G.pop();d.title.links.$name.innerText=k,i.unshift({items:[{className:"theme-icon theme-icon-back"},{className:"title",value:". ."}],value:null}),Y.active=Y.file,w.setData({focusIndex:0,data:i}),e&&e()})}},$=function(e){var t;switch(Y.active){case Y.file:if(N.type!==Y.active||N.data!==w.data||e)return;switch((t=N.data[N.focus]).value.watched_status){case"watched":t.items[1].className="theme-icon theme-icon-ok";break;case"not_watched":t.items[1].className="theme-icon theme-icon-ok hidden";break;case"not_ended":t.items[1].className="theme-icon theme-icon-ok disabled"}}N=null,T()},T=function(){w.data.length&&w.$focusItem&&w.setData({data:w.data,focusIndex:w.$focusItem.index})},u=new j({propagate:!0,focusable:!0,events:{focus:function(){a.focus()},keydown:function(e){var t,i,a,n,s,c=Z.name,l=[];function h(e,i){function s(){_.pages.main.saveVideo(null,{intent:a,playerContext:n}),n=null,a.close()}function o(e){a=core.intent({action:"play",mime:"content/video",data:{title:c,uri:i,movie:Z,file:t,position:e,externalSubtitles:l,mediaId:t.id},events:{end:function(){_.pages.main.saveVideo(null,{intent:a,playerContext:n},!0),n=null,a.close()},error:s,stop:s,hide:s,next:null,prev:null,close:function(){n&&_.pages.main.saveVideo(null,{intent:a,playerContext:n})}},context:n},function(e,t){n=t})}if(!e)return"not_ended"===t.watched_status&&t.watched_time?(r.blur(),x.show({file:t,movie:Z,callback:o}),void(a&&a.close())):void o(0)}switch(e.code){case L.ok:o.focusIndex(1),d.title.links.$name.innerText=k,m.show(),d.focus(),Z["is_tv_series"]||1!==w.data.length||Q();break;case L.playPause:if(Z["is_tv_series"]){if(w.data.length){if(Z.last_watched_season_id)for(s=0;s<w.data.length;s++)if(Z.last_watched_season_id===w.data[s].value.id){w.focusIndex(s);break}C(function(){var e=1;if(w.data.length>1){if(Z.last_watched_episode_id)for(s=1;s<w.data.length;s++)if(Z.last_watched_episode_id===w.data[s].value.id){e=s;break}w.focusIndex(e),C(function(){if(w.data.length>1){if(e=1,Z.last_watched_file_id)for(s=1;s<w.data.length;s++)if(Z.last_watched_file_id===w.data[s].value.id){e=s;break}w.focusIndex(e),m.show(),d.focus(),C()}else m.show(),d.focus()})}else m.show(),d.focus()})}}else{if(Z["last_watched_file_id"])for(s=0;s<Z.files.length;s++)if(Z["last_watched_file_id"]===Z.files[s].id)return void((t=Z.files[s]).url?h(!1,t.url):Z.getUrl(t.id,h));if(i=M(Z,Z.files),l=i.subtitles,!(i=i.video).length)return;(t=i[0]).url?h(!1,t.url):Z.getUrl(t.id,h)}}}}}),w=new A({focusIndex:0,size:7,className:"padded playList",propagate:!0,focusable:!0,fixedData:!0,cycle:!0,events:{"click:item":function(e){e.$item.data.value||!G.length?C():J()}},scroll:U}),m=new j({propagate:!0,focusable:!0,children:[w,U],events:{focus:function(){w.focus()}}}),B=[{items:[{className:"theme-icon theme-icon-categories"},{value:gettext("Description")}],click:function(){u.show(),d.title.links.$name.innerText=gettext("Description"),d.focus()}},{name:"play",items:[{className:"theme-icon theme-icon-play"},{name:"$title",value:gettext("Play")}],click:function(){d.title.links.$name.innerText=k,m.show(),d.focus(),Z["is_tv_series"]||1!==w.data.length||Q()}}],h=new D({title:[{value:gettext("Section"),className:"name"}],children:[o=new A({focusIndex:0,size:7,fixedData:!0,cycle:!0,data:B})]}),d=new D({title:[{name:"$name",value:gettext("Description"),className:"name"}],main:!0,size:2,children:[u,m],events:{focus:function(){this.currentTab?this.currentTab.focus():D.prototype.defaultEvents.focus.call(this)}}}),r=new S({visible:!1,panels:[h,d]}),K.add(r),n=new P({title:gettext("Actions"),className:"width2x",events:{show:function(){var e=s.links.favorite.links;Z.favorite?(e.$icon.className="theme-icon theme-icon-favorite-active active",e.$title.innerText=gettext("Remove from favorites")):(e.$icon.className="theme-icon theme-icon-favorite",e.$title.innerText=gettext("Add to favorite"))},hide:function(){r.focus()}},children:[s=new A({size:1,focusIndex:0,cycle:!0,fixedData:!0,data:[{name:"favorite",items:[{name:"$icon",className:"theme-icon theme-icon-favorite"},{name:"$title",className:"title",value:gettext("Add to favorite")}],click:function(){n.hide(),ee()}}],events:{keydown:function(e){switch(A.prototype.defaultEvents.keydown.call(this,e),e.code){case L.menu:case L.back:n.hide(),e.stop=!0;break;case L.left:case L.right:e.stop=!0}}}})]}),K.add(n),x=new P({visible:!1,title:gettext("Play"),className:"width2x",events:{show:function(e){this.configData=e,this.children[0].focus(),this.$text.innerText=e.name,I.links.continueWatch.links.$title.innerText=gettext("Continue watching from")+" "+H(e.file.watched_time)}},children:[I=new A({focusIndex:0,size:2,cycle:!0,fixedData:!0,className:"padded",data:[{name:"continueWatch",items:[{name:"$title",className:"title",value:gettext("Continue watching from")}],click:function(){x.configData.callback&&x.configData.callback(x.configData.file.watched_time)}},{items:[{className:"title",value:gettext("Watch again")}],click:function(){x.configData.callback&&x.configData.callback(0)}}],events:{"click:item":function(){x.hide(),r.focus()},keydown:function(e){switch(A.prototype.defaultEvents.keydown.call(this,e),e.code){case L.left:e.stop=!0;break;case L.back:x.hide(),r.focus(),e.stop=!0}}}})]}),K.add(x),K.once("show",function(){var e,t,i,s,o,l=[gettext("Name:"),gettext("Genre:"),gettext("Duration:"),gettext("Year:"),gettext("Country:"),gettext("Director:"),gettext("Actors:"),gettext("Censored:")];for(c.init({left:{code:L.menu,action:function(){r.blur(),c.hide(),n.show(),n.focus()}},middle:[{code:L.f3,title:gettext("Favorite"),action:ee}]}),c.hide(),f=X("div",{className:"info"}),p=X("div",{className:"poster"}),v=X("div",{className:"desc"}),g=X("div",{className:"fav"}),s=X("table"),p.appendChild(g),o=0;o<l.length;o++)t=X("td",{className:"left theme-subhead-color"},l[o]),i=X("td"),e=X("tr",{},t,i),s.appendChild(e),W.push({line:e,text:i});v.appendChild(s),(a=new O({propagate:!0,focusable:!0,step:5,scroll:y=new R,events:{focus:function(){c.init({left:{code:L.menu,action:function(){r.blur(),c.hide(),n.show(),n.focus()}},middle:[{code:L.f3,title:gettext("Favorite"),action:ee}]}),c.show()},blur:function(){c.hide()}}})).$body.appendChild(p),a.$body.appendChild(v),a.$body.appendChild(f),u.add(a),u.add(y),u.show()}),K.addListeners({show:function(e){var t,i=[],n=[];if(e&&e.data){for((Z=e.data.info).cover?p.style.backgroundImage="url("+core.backend.host+Z.cover+")":p.style.backgroundImage="",Z.favorite?g.style.display="block":g.style.display="none",W[0].text.innerText=Z.name,t=0;t<Z.genres.length;t++)n.push(Z.genres[t].name);W[1].text.innerText=n.join(", "),W[2].text.innerText=Z.duration+" "+gettext("min."),W[3].text.innerText=Z.year+(Z.year_end&&"0"!==Z.year_end?" - "+Z.year_end:""),W[4].text.innerText=Z.country,W[5].text.innerText=Z.director,W[6].text.innerText=Z.actors,Z.rating_mpaa||Z.age?(W[7].line.style.display="",W[7].text.innerText="",Z.age&&(W[7].text.innerText+=Z.age),Z.rating_mpaa&&(W[7].text.innerText+=Z.age?" ("+Z.rating_mpaa+")":Z.rating_mpaa)):W[7].line.style.display="none",f.innerText=Z.description,Z["is_tv_series"]?(k=gettext("Seasons"),Y.active=Y.season,Z.getSeasons(function(e,t){i=q(t),w.setData({focusIndex:0,data:i})})):(k=gettext("Play"),Y.active=Y.file,i=V(Z,Z.files),w.setData({focusIndex:0,data:i})),u.show(),d.title.links.$name.innerText=gettext("Description"),o.focusIndex(0),r.show(),d.focus(),a.init()}},keydown:function(e){switch(e.code){case L.back:J();break;case L.left:d.emit("keydown",e)}}}),e.exports=K},function(e,t,i){"use strict";var a=i(1);function n(e){(e=e||{}).focusable=e.focusable||!1,e.className+=" hidden",e.visible=null,a.call(this,e),this.visible=!1}n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.name="spa-component-tab",n.prototype.show=function(e){return!!this.visible||(this.parent.currentTab&&this.parent.currentTab.hide(e),a.prototype.show.call(this,e),this.parent.currentTab=this,!0)},n.prototype.hide=function(){return!a.prototype.hide.call(this)||(this.parent.currentTab=null,!0)},e.exports=n},function(e,t,i){"use strict";e.exports=function(e,t){var i,a,n,s=[];return e.forEach(function(e){if(t){for(i=e.name?e.name+(e["original_name"]?" ( "+e["original_name"]+" )":""):gettext("Series")+" "+e.number,n="theme-icon theme-icon-ok hidden",a=0;a<e.files.length;a++)if("not_ended"===e.files[a]["watched_status"]){n="theme-icon theme-icon-ok disabled";break}for(a=0;a<e.files.length;a++)if("watched"===e.files[a]["watched_status"]){n="theme-icon theme-icon-ok";break}}else switch(i=e.name?e.name+(e["original_name"]?" ( "+e["original_name"]+" )":""):gettext("Season")+" "+e.number,e.watched_status){case"watched":n="theme-icon theme-icon-ok";break;case"not_watched":n="theme-icon theme-icon-ok hidden";break;case"not_ended":n="theme-icon theme-icon-ok disabled"}s.push({items:[{className:"title",value:i},{className:n}],value:e})}),s}},function(e,t,i){"use strict";var a=i(50),n=i(11);e.exports=function(e,t){var i,s,o,c,l,r=[];return t=n(e,t),i=t.subtitles,(t=t.video).forEach(function(e){switch(c=[],e.subtitleList=i,e.languages.length?(e.languages.forEach(function(e){(o=a["1"][e]||a["2B"][e]||a["2T"][e])?c.push(o[1]):c.push(e||gettext("Unknown language"))}),c=c.join(", ")):c=gettext("Unknown language"),e["watched_status"]){case"watched":l="theme-icon theme-icon-ok";break;case"not_watched":l="theme-icon theme-icon-ok hidden";break;case"not_ended":l="theme-icon theme-icon-ok disabled"}s=e.quality?(e.quality.code?e.quality.code+" (":"(")+(e.quality.name||gettext("Unknown quality"))+")":"("+gettext("Unknown quality")+")",r.push({items:[{className:"title",value:c+" "+s},{className:l}],value:e})}),r}},function(e,t,i){"use strict";var a,n,s,o=i(51),c={1:{},"2T":{},"2B":{}};for(a=0,n=o.length;a<n;a++)s=o[a],c["1"][s["1"]]=c["2T"][s["2T"]]=c["2B"][s["2B"]]=[s.name,s.local];o=null,e.exports=c},function(e,t){e.exports=[{"name":"Abkhaz","local":"",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{"name":"Afar","local":"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{"name":"Afrikaans","local":"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{"name":"Akan","local":"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{"name":"Albanian","local":"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{"name":"Amharic","local":"",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{"name":"Arabic","local":"",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{"name":"Aragonese","local":"Aragons",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{"name":"Armenian","local":"",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{"name":"Assamese","local":"",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{"name":"Avaric","local":"",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{"name":"Avestan","local":"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{"name":"Aymara","local":"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{"name":"Azerbaijani","local":"Azrbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{"name":"Bambara","local":"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{"name":"Bashkir","local":"",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{"name":"Basque","local":"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{"name":"Belarusian","local":"",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{"name":"Bengali","local":"",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{"name":"Bihari","local":"",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{"name":"Bislama","local":"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{"name":"Bosnian","local":"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{"name":"Breton","local":"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{"name":"Bulgarian","local":"",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{"name":"Burmese","local":"",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{"name":"Catalan","local":"Catal",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{"name":"Chamorro","local":"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{"name":"Chechen","local":"",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{"name":"Chichewa","local":"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{"name":"Chinese","local":"",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{"name":"Chuvash","local":"",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{"name":"Cornish","local":"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{"name":"Corsican","local":"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{"name":"Cree","local":"",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{"name":"Croatian","local":"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{"name":"Czech","local":"etina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{"name":"Danish","local":"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{"name":"Divehi","local":"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{"name":"Dutch","local":"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{"name":"Dzongkha","local":"",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{"name":"English","local":"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{"name":"Esperanto","local":"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{"name":"Estonian","local":"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{"name":"Ewe","local":"Eegbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{"name":"Faroese","local":"Froyskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{"name":"Fijian","local":"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{"name":"Finnish","local":"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{"name":"French","local":"Franais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{"name":"Fula","local":"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{"name":"Galician","local":"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{"name":"Georgian","local":"",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{"name":"German","local":"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{"name":"Greek","local":"",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{"name":"Guaran","local":"Avae'",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{"name":"Gujarati","local":"",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{"name":"Haitian","local":"Kreyl Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{"name":"Hausa","local":"",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{"name":"Hebrew","local":"",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{"name":"Herero","local":"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{"name":"Hindi","local":"",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{"name":"Hiri Motu","local":"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{"name":"Hungarian","local":"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{"name":"Interlingua","local":"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{"name":"Indonesian","local":"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{"name":"Interlingue","local":"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{"name":"Irish","local":"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{"name":"Igbo","local":"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{"name":"Inupiaq","local":"Iupiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{"name":"Ido","local":"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{"name":"Icelandic","local":"slenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{"name":"Italian","local":"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{"name":"Inuktitut","local":"",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{"name":"Japanese","local":"",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{"name":"Javanese","local":"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{"name":"Kalaallisut","local":"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{"name":"Kannada","local":"",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{"name":"Kanuri","local":"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{"name":"Kashmiri","local":"",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{"name":"Kazakh","local":"",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{"name":"Khmer","local":"",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{"name":"Kikuyu","local":"Gky",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{"name":"Kinyarwanda","local":"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{"name":"Kyrgyz","local":"",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{"name":"Komi","local":"",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{"name":"Kongo","local":"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{"name":"Korean","local":"",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{"name":"Kurdish","local":"Kurd",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{"name":"Kwanyama","local":"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{"name":"Latin","local":"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{"name":"Luxembourgish","local":"Ltzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{"name":"Ganda","local":"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{"name":"Limburgish","local":"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{"name":"Lingala","local":"Lingla",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{"name":"Lao","local":"",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{"name":"Lithuanian","local":"Lietuvi",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{"name":"Luba-Katanga","local":"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{"name":"Latvian","local":"Latvieu",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{"name":"Manx","local":"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{"name":"Macedonian","local":"",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{"name":"Malagasy","local":"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{"name":"Malay","local":"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{"name":"Malayalam","local":"",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{"name":"Maltese","local":"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{"name":"Mori","local":"Mori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{"name":"Marathi","local":"",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{"name":"Marshallese","local":"Kajin Maje",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{"name":"Mongolian","local":"",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{"name":"Nauru","local":"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{"name":"Navajo","local":"Din Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{"name":"Northern Ndebele","local":"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{"name":"Nepali","local":"",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{"name":"Ndonga","local":"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{"name":"Norwegian Bokml","local":"Norsk (Bokml)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{"name":"Norwegian Nynorsk","local":"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{"name":"Norwegian","local":"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{"name":"Nuosu","local":" Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{"name":"Southern Ndebele","local":"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{"name":"Occitan","local":"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{"name":"Ojibwe","local":"",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{"name":"Old Church Slavonic","local":"",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{"name":"Oromo","local":"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{"name":"Oriya","local":"",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{"name":"Ossetian","local":" ",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{"name":"Panjabi","local":"",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{"name":"Pli","local":"",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{"name":"Persian","local":"",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{"name":"Polish","local":"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{"name":"Pashto","local":"",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{"name":"Portuguese","local":"Portugus",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{"name":"Quechua","local":"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{"name":"Romansh","local":"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{"name":"Kirundi","local":"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{"name":"Romanian","local":"Romn",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{"name":"Russian","local":"",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{"name":"Sanskrit","local":"",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{"name":"Sardinian","local":"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{"name":"Sindhi","local":"",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{"name":"Northern Sami","local":"Smegiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{"name":"Samoan","local":"Gagana Smoa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{"name":"Sango","local":"Sng",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{"name":"Serbian","local":"",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{"name":"Gaelic","local":"Gidhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{"name":"Shona","local":"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{"name":"Sinhala","local":"",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{"name":"Slovak","local":"Slovenina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{"name":"Slovene","local":"Slovenina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{"name":"Somali","local":"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{"name":"Southern Sotho","local":"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{"name":"Spanish","local":"Espaol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{"name":"Sundanese","local":"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{"name":"Swahili","local":"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{"name":"Swati","local":"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{"name":"Swedish","local":"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{"name":"Tamil","local":"",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{"name":"Telugu","local":"",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{"name":"Tajik","local":"",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{"name":"Thai","local":"",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{"name":"Tigrinya","local":"",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{"name":"Tibetan Standard","local":"",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{"name":"Turkmen","local":"Trkmene",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{"name":"Tagalog","local":"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{"name":"Tswana","local":"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{"name":"Tonga","local":"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{"name":"Turkish","local":"Trke",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{"name":"Tsonga","local":"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{"name":"Tatar","local":"",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{"name":"Twi","local":"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{"name":"Tahitian","local":"Reo Mohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{"name":"Uyghur","local":"",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{"name":"Ukrainian","local":"",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{"name":"Urdu","local":"",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{"name":"Uzbek","local":"Ozbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{"name":"Venda","local":"Tshivena",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{"name":"Vietnamese","local":"Ting Vit",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{"name":"Volapk","local":"Volapk",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{"name":"Walloon","local":"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{"name":"Welsh","local":"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{"name":"Wolof","local":"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{"name":"Western Frisian","local":"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{"name":"Xhosa","local":"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{"name":"Yiddish","local":"",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{"name":"Yoruba","local":"Yorb",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{"name":"Zhuang","local":"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{"name":"Zulu","local":"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}]}]);
//# sourceMappingURL=main.js.map